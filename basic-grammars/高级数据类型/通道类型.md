# 通道类型
通道（Channel）是Go语言中一种非常独特的数据结构。它可用于在不同Goroutine之间传递类型化的数据，并且是并发安全的。

通道表示方法如下所示。左边是代表通道类型的关键字chan，而右边则是一个可变的部分，即代表该通道类型允许传递的数据的类型（或称通道的元素类型）。这两部分之间需要以空格分隔。
```
chan T
```

与其它的数据类型不同，我们无法表示一个通道类型的值。因此，我们也无法用字面量来为通道类型的变量赋值。我们只能通过调用内建函数make来达到目的。make函数可接受两个参数。第一个参数是代表了将被初始化的值的类型的字面量（比如chan int），而第二个参数则是值的长度。
```
ch1 := make(chan string, 5)
```
> make函数也可以被用来初始化切片类型或字典类型的值。

通道值的长度应该被称为其缓存的尺寸。换句话说，它代表着通道值中可以暂存的数据的个数。注意，暂存在通道值中的数据是先进先出的，即：越早被放入（或称发送）到通道值的数据会越先被取出（或称接收）。

操作符 <- 向通道发送数据。也可以使用它从通道值接收数据。  
在通道值有效的前提下，针对它的发送操作会在通道值已满（其中缓存的数据的个数已等于它的长度）时被阻塞。
```
ch1 <- "value1"
```


针对有效通道值的接收操作会在它已空（其中没有缓存任何数据）时被阻塞。
```
value := <- ch1
value, ok := <- ch1 // 变量ok的值是bool类型,代表通道值的状态，true代表通道值有效，false则代表通道值已无效（或称已关闭）。
```
如果在接收操作进行之前或过程中通道值被关闭了，则接收操作会立即结束并返回一个该通道值的元素类型的零值。


关闭通道。对通道值的重复关闭会引发运行时恐慌。这会使程序崩溃。所以一定要避免这种情况的发生。  
向一个已被关闭的通道值发送数据会引发运行时恐慌。
```
close(ch1)  
```


非缓冲通道：发送方在向通道值发送数据的时候会立即被阻塞，直到有某一个接收方已从该通道值中接收了这条数据。
```
make(chan int, 0)
```


在编写类型声明的时候，可以声明为单向通道。注：初始化一个通道值的时候不能指定它为单向。
单向通道的主要作用是约束程序对通道值的使用方式。我们调用一个函数时给予它一个发送通道作为参数，以此来约束它只能向该通道发送数据。一个函数将一个接收通道作为结果返回，以此来约束调用该函数的代码只能从这个通道中接收数据。
```
// 接收通道：只可从中接收数据的单向通道类型
type Receiver <-chan int 
```

```
// 发送通道类型
type Sender chan<- int 
```















# go 命令

## go run
用于运营源码命令。只能接受一个命令源码文件以及若干个库源码文件作为文件参数。该命令会先编译源码文件再执行。
```
go run
-a：强制编译相关代码，不管他们编辑的结果是否是最新的
-n：打印编译过程中需要运行的命令，但不真正执行他们
-x：打印编译过程中所需运行的命令，并真正执行他们
-p n：并行编译，其中n为并行的数量，设置逻辑cpu个数
-v：列出被编译的代码包的名称
-a -v：列出所有被编译的代码包的名称（1.3包含标准库代码包，1.4不包含标准库代码包）
-work：显示编译时创建的临时工作目录的路径，并且不删除它
```


## go build
用于编译源码文件或者代码包，编译非命令源码文件不会产生任何结果文件。在运行go build命令的时候，默认不会编译目标代码包所依赖的那些代码包。如果被依赖的代码包的归档文件不存在，或者源码文件有了变化，那它还是会被编译。  
编译命令源码文件会在该命令的执行目录生成一个可执行的文件。  如果执行命令且不加任何参数，会试图把当前目录作为代码包并编译
```
go build
-a：会强制编译编译目标代码包所依赖的那些代码包，此时，不但目标代码包总是会被编译，它依赖的代码包会被编译，即使依赖的是标准库中的代码包也是如此。不加-a默认只会编译归档文件不是最新的代码包
-i：不但要编译依赖的代码包，还要安装它们的归档文件
-n：打印编译过程中需要运行的命令，但不真正执行他们
-x：打印编译过程中所需运行的命令，并真正执行他们
```



## go install
用于编译并安装代码包，或源码文件。如果安装的是库源码文件，那么结果文件会被搬运到它所在工作区的 pkg 目录下生成归档文件。  如果安装的是命令源码文件，那么结果文件会被搬运到它所在工作区的 bin 目录中，或者环境变量 $GOBIN 目录下生成可执行文件。  
1. 执行该命令且不追加任何参数，会试图把当前目录作为代码包，并安装。
2. 执行该命令且以代码包的导入路径作为参数，该代码包及其依赖会被安装。
3. 执行该命令且以命令源码文件及相关库源码文件作为参数，只有这些文件会被编译并安装。
```
go install
```


## go get
用于从远程代码仓库（如github）上下载并安装代码包。指定的代码包会被下载到 $GOPATH 中包含的第一个工作区的src目录中。
```
go get
-d：只执行下载动作，而不执行安装动作
-fix：在下载代码包之后先执行修正动作，而后再进行编译和安装
-u：利用网络来更新已有的代码包及其依赖包
-t：同时下载测试所需的代码包
-insecure：允许通过非安全的网络协议下载和安装代码包。HTTP 就是这样的协议
```


## 变更存储源码的代码仓库或者代码包的相对路径
对代码包的远程导入路径进行自定义的方法是：在该代码包中的库源码文件的包声明语句的右边加入导入注释，像这样：
```
package semaphore // import "golang.org/x/sync/semaphore"
```
